{"version":3,"sources":["redux/auth/auth-operations.js","AuthNav/AuthNav.module.css","UserMenu/UserMenu.module.css","AppBar/AppBar.module.css","redux/auth/auth-selectors.js","UserMenu/UserMenu.js","UserMenu/userImg.png","AuthNav/AuthNav.js","AppBar/AppBar.js","PublicRoute.js","PrivateRoute.js","App.js","redux/reducer.js","redux/auth/auth-slice.js","redux/store.js","index.js","redux/actions.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","post","data","alert","logIn","operations","logOut","loadUser","_","thunkAPI","state","getState","persistedToken","auth","rejectWithValue","get","module","exports","authSelectors","getIsLoggedIn","isLoggedIn","getUsername","user","name","getIsFetchingCurrent","isLoadingUser","UserMenu","dispatch","useDispatch","useSelector","className","styles","container","src","alt","userImg","userSpan","logoutBtn","type","onClick","AuthNav","authBar","to","exact","link","activeClassName","activeLink","AppBar","header","PublicRoute","children","restricted","redirectTo","routeProps","shouldRedirect","PrivateRoute","HomeView","lazy","RegistrationView","LoginView","ContactsView","connect","useEffect","authOperations","fallback","path","contacts","createReducer","addContactSuccess","payload","deleteContactSuccess","filter","id","fetchContactSuccess","changeFilter","loading","addContactRequest","addContactError","deleteContactRequest","deleteContactError","fetchContactRequest","fetchContactError","error","combineReducers","authSlice","createSlice","initialState","email","extraReducers","fulfilled","action","pending","rejected","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contactReducer","devTools","process","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById","createAction"],"mappings":"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","file":"static/js/main.213e2522.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com/';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    alert(error);\r\n  }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    alert(error);\r\n  }\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n      alert(error);\r\n  }\r\n});\r\n\r\nconst loadUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      // console.log('Токена нет, уходим из fetchCurrentUser');\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n        alert(error);\r\n    }\r\n  },\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  loadUser,\r\n};\r\nexport default operations;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__8Rex-\",\"activeLink\":\"AuthNav_activeLink__4fUt2 AuthNav_link__8Rex-\",\"authBar\":\"AuthNav_authBar__5DVCE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userSpan\":\"UserMenu_userSpan__1mofD\",\"container\":\"UserMenu_container__3ht4f\",\"logoutBtn\":\"UserMenu_logoutBtn__1Syhx\",\"userImg\":\"UserMenu_userImg__3RKWi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__1YOco\"};","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nconst getIsFetchingCurrent = state => state.auth.isLoadingUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getIsFetchingCurrent,\r\n};\r\nexport default authSelectors;","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport authSelectors from '../redux/auth/auth-selectors';\r\nimport operations from '../redux/auth/auth-operations'\r\nimport styles from './UserMenu.module.css';\r\nimport userImg from './userImg.png'\r\n\r\nexport default function UserMenu() {\r\n    const dispatch = useDispatch();\r\n    const name = useSelector(authSelectors.getUsername)\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <img src={userImg} alt=\"\" className={styles.userImg}/>\r\n            <span className={styles.userSpan}>Hello, {name}</span>\r\n            <button\r\n                className={styles.logoutBtn}\r\n                type=\"button\"\r\n                onClick={()=>dispatch(operations.logOut())}\r\n            >Logout</button>\r\n        </div>\r\n    )\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAActQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////20c3AAAAAJd0Uk5TAA5MnNb4151NDFu68rsLIaOfMsowzi0Qs+y4fWh/rw93/PupNgmudiDZ94Jp/p7VIyflgIpES/lh5+EeWf0x7Vg781pfG9ibAwShQgJO9sm/vTM38N95KQbvhbeZRbCxRjy0FIPo6YEmyz7QxnwfCD17xTqlUgfNHcH6lxyWk1R4FxO5zBaHAY+k5C4v2knc3ZJwwCXmXWFrpIkAAAABYktHRJh20QY+AAAACXBIWXMAAaPzAAGj8wGfmYJcAAACxklEQVRIx41V+UMSQRR+lpiaqYG2ShphbnmhaGqCUgoeqIjSoZR2gB3iRZYaaGYeZVlaXs2/G+/tRuw6y/p+2Z3vfd/Mvjcz3wKcioxz5zMNjBmyLmRngH7k5F7MY3LkXcrN1+MXFBpYShguF6TnG01MFSZjOn5RMTsVxVe0+UKJxCk1Xy0rKzeXSqNrFk3BdSsSKm5UijgSK29W4Nh6S4tfVY35mtrkjEJtDSLVVRqCOhum68X/iFiPiK2OzxfNmG2wp2L2BsTMIlfQ2ITJ20qwGbGmRq6gBT/Y0KoEW+9gWS1cQRtO5lBN1uhAtI1fM6ac7Uqw3Ykov+oOF+5ZkRK8ey8Bujq5gi435jxKsBtncXdxBT29uHqfNxXrL0Sst4cr8A7QORpMxQbpPA34uAIY8mN2OOUGFAwj4s/m80EYodMZuP8PeBAgYETQEMDQQyI8Gh2zBIOWsVFqKXustUCiiicuorgcpvFxk0MelHs1BWCZsKkvnG1C+/5A/tNnVrXA+vyFlnP4QiVuxgl3OMRt6+TLV0wjXr+ZPM2fKnElp3RGAuFwIOJMOporPKXmT8/IOf/s3PS8EA0Go8L824V3fhmeea/kD2bJky+2KnZJyF6U62pQHJmiTKmFkaVl9dLLSx+kVmemHPxYnKCV1Y+8bsRWVygdT2aDa5JXL+Tw+52zIFX/KSgD6/SZhs/9WhvaP0eW7l6XhhsR6lyzCJohNlPPTRs0qiMHNW9CmtjcItclM9jYJnsJQdoIkd1sf0m8dtMCX3fSC3a+0RIdiYK+49vuD9CJn7vk1F6w75FX+PQEvj7k7dnBg47q39fjA+zjsarxAG3ar5i+IPYbmWswi4+tqL4gSp2dBfopHOjzAQ7oVwG0hYdnERzSFQembeeqoN8BoxXUls0PD1HhCN35+CyCY9yxIzDG2UnnWfgAf05Y3PgX5eJ5lNUfMBIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDQtMDRUMTc6MTg6MDIrMDI6MDDx0JkSAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA0LTA0VDE3OjE4OjAyKzAyOjAwgI0hrgAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE2LTA2LTE2IFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ+a/NLYAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTIyODU1MDgy24JD+QAAABN0RVh0VGh1bWI6OlNpemUAMTMuN0tCQokugK4AAABBdEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy81Ni82WE9pT2NCLzE0MTUvaWMtdXNlcm5hbWVfOTc1ODcucG5nlO5drQAAAABJRU5ErkJggg==\"","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport styles from './AuthNav.module.css';\r\n\r\nexport default function AuthNav () {\r\n    return (\r\n        <div className={styles.authBar}>\r\n            <NavLink\r\n                to=\"/register\"\r\n                exact\r\n            className={styles.link}\r\n            activeClassName={styles.activeLink}\r\n            >\r\n                Registration\r\n            </NavLink>\r\n            <NavLink\r\n                to=\"/login\"\r\n                exact\r\n            className={styles.link}\r\n            activeClassName={styles.activeLink}\r\n            >\r\n                Login\r\n            </NavLink>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\nimport authSelectors from '../redux/auth/auth-selectors';\r\nimport { useSelector } from 'react-redux';\r\nimport styles from './AppBar.module.css';\r\n\r\nexport default function AppBar() {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn)\r\n    return (\r\n        <header className={styles.header}>\r\n            {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n        </header>\r\n    );\r\n};","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authSelectors from './redux/auth/auth-selectors';\r\n\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo,\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo}/> : children}\r\n    </Route>\r\n  );\r\n}","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authSelectors from './redux/auth/auth-selectors';\r\n\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo,\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n       {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}","import { useEffect, Suspense, lazy } from 'react';\n// import shortid from 'shortid';\nimport { connect, useDispatch,useSelector } from 'react-redux';\nimport AppBar from './AppBar/AppBar'\nimport { Switch, Redirect } from 'react-router';\nimport PublicRoute from './PublicRoute';\nimport PrivateRoute from './PrivateRoute';\nimport authSelectors from './redux/auth/auth-selectors';\nimport authOperations from '../src/redux/auth/auth-operations';\nimport './App.module.css'\n\nconst HomeView = lazy(() => import('./Views/HomeView'));\nconst RegistrationView = lazy(() => import('./Views/RegistrationView'));\nconst LoginView = lazy(() => import('./Views/LoginView'));\nconst ContactsView = lazy(() => import('./Views/ContactsView'));\n\nfunction App() {\n  const dispatch = useDispatch();\n  const isLoadingUser = useSelector(authSelectors.getIsFetchingCurrent);\n\n  useEffect(() => {\n    dispatch(authOperations.loadUser());\n  }, [dispatch]);\n\n  return (\n    <>\n      {isLoadingUser ? (\n        <h1>Loading...</h1>\n      ) : (\n        <div>\n          <AppBar />\n\n          <Switch>\n            <Suspense fallback={<p>LOADING</p>}>\n              <PublicRoute exact path=\"/\">\n                <HomeView />\n              </PublicRoute>\n              <PublicRoute exact path=\"/register\" redirectTo=\"/contacts\" restricted>\n                <RegistrationView />\n              </PublicRoute>\n              <PublicRoute exact path=\"/login\" redirectTo=\"/contacts\" restricted>\n                <LoginView />\n              </PublicRoute>\n\n              <PrivateRoute exact path=\"/contacts\" redirectTo=\"/login\">\n                <ContactsView/>\n              </PrivateRoute>\n              <PublicRoute>\n                <Redirect to=\"/contacts\" />\n              </PublicRoute>\n            </Suspense>\n          </Switch>\n        </div>\n      )}\n      </>\n  );\n};\n\nexport default connect()(App);\n","import { combineReducers } from \"redux\";\r\nimport { createReducer } from \"@reduxjs/toolkit\";\r\nimport {\r\n    addContactSuccess,\r\n    addContactRequest, \r\n    addContactError, \r\n    deleteContactSuccess, \r\n    deleteContactRequest,\r\n    deleteContactError,\r\n    fetchContactSuccess,\r\n    fetchContactRequest,\r\n    fetchContactError,\r\n    changeFilter\r\n} from \"./actions\";\r\n\r\n\r\n\r\nconst contacts = createReducer([], {\r\n    [addContactSuccess]: (state, {payload}) => [...state, payload],\r\n    [deleteContactSuccess]: (state, { payload }) => state.filter(({ id }) => id !== payload),\r\n    [fetchContactSuccess]: (_, {payload}) => payload\r\n});\r\n\r\nconst filter = createReducer('', {\r\n    [changeFilter]: (_, {payload}) => payload,\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n    [addContactSuccess]: () => false,\r\n    [addContactRequest]: () => true,\r\n    [addContactError]: () => false,\r\n    [deleteContactSuccess]: () => false,\r\n    [deleteContactRequest]: () => true,\r\n    [deleteContactError]: () => false,\r\n    [fetchContactSuccess]: () => false,\r\n    [fetchContactRequest]: () => true,\r\n    [fetchContactError]: () => false\r\n});\r\n\r\nconst error = createReducer(null, {})\r\n\r\nexport default combineReducers({\r\n    contacts,\r\n    filter,\r\n    loading,\r\n    error,\r\n});","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isLoadingUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.loadUser.pending](state) {\r\n      state.isLoadingUser = true;\r\n    },\r\n    [authOperations.loadUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isLoadingUser = false;\r\n    },\r\n    [authOperations.loadUser.rejected](state) {\r\n      state.isLoadingUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;","import contactReducer from './reducer';\r\nimport authReducer from './auth/auth-slice';\r\nimport { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\r\nimport {\r\n    persistStore,\r\n    persistReducer,\r\n    FLUSH,\r\n    PAUSE,\r\n    PERSIST,\r\n    PURGE,\r\n    REGISTER,\r\n    REHYDRATE\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        auth: persistReducer(authPersistConfig, authReducer),\r\n        contacts: contactReducer,\r\n    },\r\n    devTools: process.env.NODE_ENV === 'development',\r\n    middleware: [\r\n    ...getDefaultMiddleware({\r\n        serializableCheck: {\r\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n        },\r\n    }),\r\n]\r\n})\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './App';\nimport {store, persistor}  from './redux/store';\nimport { Provider } from 'react-redux';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","import { createAction } from \"@reduxjs/toolkit\"\r\n\r\nexport const fetchContactRequest = createAction('contacts/fetchContactRequest');\r\nexport const fetchContactSuccess = createAction('contacts/fetchContactSuccess');\r\nexport const fetchContactError = createAction('contacts/fetchContactError');\r\n\r\nexport const addContactRequest = createAction('contacts/addContactRequest');\r\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\r\nexport const addContactError = createAction('contacts/addContactError');\r\n\r\nexport const deleteContactRequest = createAction('contacts/deleteContactRequest');\r\nexport const deleteContactSuccess = createAction('contacts/deleteContactSuccess');\r\nexport const deleteContactError = createAction('contacts/deleteContactError');\r\n\r\nexport const changeFilter = createAction('contacts/changeFilter');\r\n"],"sourceRoot":""}