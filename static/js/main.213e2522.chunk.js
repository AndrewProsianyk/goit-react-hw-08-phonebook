(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{14:function(A,t,e){"use strict";var n=e(15),c=e.n(n),r=e(23),a=e(17),o=e.n(a),s=e(3);o.a.defaults.baseURL="https://connections-api.herokuapp.com/";var u=function(A){o.a.defaults.headers.common.Authorization="Bearer ".concat(A)},i=function(){o.a.defaults.headers.common.Authorization=""},d=Object(s.c)("auth/register",function(){var A=Object(r.a)(c.a.mark((function A(t){var e,n;return c.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,o.a.post("/users/signup",t);case 3:return e=A.sent,n=e.data,u(n.token),A.abrupt("return",n);case 9:A.prev=9,A.t0=A.catch(0),alert(A.t0);case 12:case"end":return A.stop()}}),A,null,[[0,9]])})));return function(t){return A.apply(this,arguments)}}()),l=Object(s.c)("auth/login",function(){var A=Object(r.a)(c.a.mark((function A(t){var e,n;return c.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,o.a.post("/users/login",t);case 3:return e=A.sent,n=e.data,u(n.token),A.abrupt("return",n);case 9:A.prev=9,A.t0=A.catch(0),alert(A.t0);case 12:case"end":return A.stop()}}),A,null,[[0,9]])})));return function(t){return A.apply(this,arguments)}}()),j={register:d,logOut:Object(s.c)("auth/logout",Object(r.a)(c.a.mark((function A(){return c.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,o.a.post("/users/logout");case 3:i(),A.next=9;break;case 6:A.prev=6,A.t0=A.catch(0),alert(A.t0);case 9:case"end":return A.stop()}}),A,null,[[0,6]])})))),logIn:l,loadUser:Object(s.c)("auth/refresh",function(){var A=Object(r.a)(c.a.mark((function A(t,e){var n,r,a,s;return c.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(n=e.getState(),null!==(r=n.auth.token)){A.next=4;break}return A.abrupt("return",e.rejectWithValue());case 4:return u(r),A.prev=5,A.next=8,o.a.get("/users/current");case 8:return a=A.sent,s=a.data,A.abrupt("return",s);case 13:A.prev=13,A.t0=A.catch(5),alert(A.t0);case 16:case"end":return A.stop()}}),A,null,[[5,13]])})));return function(t,e){return A.apply(this,arguments)}}())};t.a=j},21:function(A,t,e){A.exports={link:"AuthNav_link__8Rex-",activeLink:"AuthNav_activeLink__4fUt2 AuthNav_link__8Rex-",authBar:"AuthNav_authBar__5DVCE"}},25:function(A,t,e){A.exports={userSpan:"UserMenu_userSpan__1mofD",container:"UserMenu_container__3ht4f",logoutBtn:"UserMenu_logoutBtn__1Syhx",userImg:"UserMenu_userImg__3RKWi"}},46:function(A,t,e){A.exports={header:"AppBar_header__1YOco"}},78:function(A,t,e){},81:function(A,t,e){"use strict";e.r(t);var n=e(0),c=e.n(n),r=e(26),a=e.n(r),o=e(18),s=e(44),u=e(7),i={getIsLoggedIn:function(A){return A.auth.isLoggedIn},getUsername:function(A){return A.auth.user.name},getIsFetchingCurrent:function(A){return A.auth.isLoadingUser}},d=e(14),l=e(25),j=e.n(l),b=e(1);function O(){var A=Object(u.c)(),t=Object(u.d)(i.getUsername);return Object(b.jsxs)("div",{className:j.a.container,children:[Object(b.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAActQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////20c3AAAAAJd0Uk5TAA5MnNb4151NDFu68rsLIaOfMsowzi0Qs+y4fWh/rw93/PupNgmudiDZ94Jp/p7VIyflgIpES/lh5+EeWf0x7Vg781pfG9ibAwShQgJO9sm/vTM38N95KQbvhbeZRbCxRjy0FIPo6YEmyz7QxnwfCD17xTqlUgfNHcH6lxyWk1R4FxO5zBaHAY+k5C4v2knc3ZJwwCXmXWFrpIkAAAABYktHRJh20QY+AAAACXBIWXMAAaPzAAGj8wGfmYJcAAACxklEQVRIx41V+UMSQRR+lpiaqYG2ShphbnmhaGqCUgoeqIjSoZR2gB3iRZYaaGYeZVlaXs2/G+/tRuw6y/p+2Z3vfd/Mvjcz3wKcioxz5zMNjBmyLmRngH7k5F7MY3LkXcrN1+MXFBpYShguF6TnG01MFSZjOn5RMTsVxVe0+UKJxCk1Xy0rKzeXSqNrFk3BdSsSKm5UijgSK29W4Nh6S4tfVY35mtrkjEJtDSLVVRqCOhum68X/iFiPiK2OzxfNmG2wp2L2BsTMIlfQ2ITJ20qwGbGmRq6gBT/Y0KoEW+9gWS1cQRtO5lBN1uhAtI1fM6ac7Uqw3Ykov+oOF+5ZkRK8ey8Bujq5gi435jxKsBtncXdxBT29uHqfNxXrL0Sst4cr8A7QORpMxQbpPA34uAIY8mN2OOUGFAwj4s/m80EYodMZuP8PeBAgYETQEMDQQyI8Gh2zBIOWsVFqKXustUCiiicuorgcpvFxk0MelHs1BWCZsKkvnG1C+/5A/tNnVrXA+vyFlnP4QiVuxgl3OMRt6+TLV0wjXr+ZPM2fKnElp3RGAuFwIOJMOporPKXmT8/IOf/s3PS8EA0Go8L824V3fhmeea/kD2bJky+2KnZJyF6U62pQHJmiTKmFkaVl9dLLSx+kVmemHPxYnKCV1Y+8bsRWVygdT2aDa5JXL+Tw+52zIFX/KSgD6/SZhs/9WhvaP0eW7l6XhhsR6lyzCJohNlPPTRs0qiMHNW9CmtjcItclM9jYJnsJQdoIkd1sf0m8dtMCX3fSC3a+0RIdiYK+49vuD9CJn7vk1F6w75FX+PQEvj7k7dnBg47q39fjA+zjsarxAG3ar5i+IPYbmWswi4+tqL4gSp2dBfopHOjzAQ7oVwG0hYdnERzSFQembeeqoN8BoxXUls0PD1HhCN35+CyCY9yxIzDG2UnnWfgAf05Y3PgX5eJ5lNUfMBIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDQtMDRUMTc6MTg6MDIrMDI6MDDx0JkSAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA0LTA0VDE3OjE4OjAyKzAyOjAwgI0hrgAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE2LTA2LTE2IFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ+a/NLYAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTIyODU1MDgy24JD+QAAABN0RVh0VGh1bWI6OlNpemUAMTMuN0tCQokugK4AAABBdEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy81Ni82WE9pT2NCLzE0MTUvaWMtdXNlcm5hbWVfOTc1ODcucG5nlO5drQAAAABJRU5ErkJggg==",alt:"",className:j.a.userImg}),Object(b.jsxs)("span",{className:j.a.userSpan,children:["Hello, ",t]}),Object(b.jsx)("button",{className:j.a.logoutBtn,type:"button",onClick:function(){return A(d.a.logOut())},children:"Logout"})]})}var h=e(21),f=e.n(h);function g(){return Object(b.jsxs)("div",{className:f.a.authBar,children:[Object(b.jsx)(o.b,{to:"/register",exact:!0,className:f.a.link,activeClassName:f.a.activeLink,children:"Registration"}),Object(b.jsx)(o.b,{to:"/login",exact:!0,className:f.a.link,activeClassName:f.a.activeLink,children:"Login"})]})}var p=e(46),x=e.n(p);function m(){var A=Object(u.d)(i.getIsLoggedIn);return Object(b.jsx)("header",{className:x.a.header,children:A?Object(b.jsx)(O,{}):Object(b.jsx)(g,{})})}var k=e(4),v=e(20),I=e(30),R=["children","restricted","redirectTo"];function N(A){var t=A.children,e=A.restricted,n=void 0!==e&&e,c=A.redirectTo,r=Object(I.a)(A,R),a=Object(u.d)(i.getIsLoggedIn)&&n;return Object(b.jsx)(k.b,Object(v.a)(Object(v.a)({},r),{},{children:a?Object(b.jsx)(k.a,{to:c}):t}))}var y=["children","redirectTo"];function L(A){var t=A.children,e=A.redirectTo,n=Object(I.a)(A,y),c=Object(u.d)(i.getIsLoggedIn);return Object(b.jsx)(k.b,Object(v.a)(Object(v.a)({},n),{},{children:c?t:Object(b.jsx)(k.a,{to:e})}))}e(78);var M=Object(n.lazy)((function(){return e.e(6).then(e.bind(null,87))})),U=Object(n.lazy)((function(){return e.e(5).then(e.bind(null,88))})),B=Object(n.lazy)((function(){return e.e(4).then(e.bind(null,89))})),V=Object(n.lazy)((function(){return e.e(3).then(e.bind(null,90))}));var Y,C,T,F=Object(u.b)()((function(){var A=Object(u.c)(),t=Object(u.d)(i.getIsFetchingCurrent);return Object(n.useEffect)((function(){A(d.a.loadUser())}),[A]),Object(b.jsx)(b.Fragment,{children:t?Object(b.jsx)("h1",{children:"Loading..."}):Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{}),Object(b.jsx)(k.d,{children:Object(b.jsxs)(n.Suspense,{fallback:Object(b.jsx)("p",{children:"LOADING"}),children:[Object(b.jsx)(N,{exact:!0,path:"/",children:Object(b.jsx)(M,{})}),Object(b.jsx)(N,{exact:!0,path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(U,{})}),Object(b.jsx)(N,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(B,{})}),Object(b.jsx)(L,{exact:!0,path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(V,{})}),Object(b.jsx)(N,{children:Object(b.jsx)(k.a,{to:"/contacts"})})]})})]})})})),w=e(29),E=e(5),W=e(6),S=e(3),D=e(9),G=Object(S.d)([],(Y={},Object(E.a)(Y,D.c,(function(A,t){var e=t.payload;return[].concat(Object(w.a)(A),[e])})),Object(E.a)(Y,D.g,(function(A,t){var e=t.payload;return A.filter((function(A){return A.id!==e}))})),Object(E.a)(Y,D.j,(function(A,t){return t.payload})),Y)),X=Object(S.d)("",Object(E.a)({},D.d,(function(A,t){return t.payload}))),Q=Object(S.d)(!1,(C={},Object(E.a)(C,D.c,(function(){return!1})),Object(E.a)(C,D.b,(function(){return!0})),Object(E.a)(C,D.a,(function(){return!1})),Object(E.a)(C,D.g,(function(){return!1})),Object(E.a)(C,D.f,(function(){return!0})),Object(E.a)(C,D.e,(function(){return!1})),Object(E.a)(C,D.j,(function(){return!1})),Object(E.a)(C,D.i,(function(){return!0})),Object(E.a)(C,D.h,(function(){return!1})),C)),J=Object(S.d)(null,{}),z=Object(W.b)({contacts:G,filter:X,loading:Q,error:J}),_=Object(S.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoadingUser:!1},extraReducers:(T={},Object(E.a)(T,d.a.register.fulfilled,(function(A,t){A.user=t.payload.user,A.token=t.payload.token,A.isLoggedIn=!0})),Object(E.a)(T,d.a.logIn.fulfilled,(function(A,t){A.user=t.payload.user,A.token=t.payload.token,A.isLoggedIn=!0})),Object(E.a)(T,d.a.logOut.fulfilled,(function(A){A.user={name:null,email:null},A.token=null,A.isLoggedIn=!1})),Object(E.a)(T,d.a.loadUser.pending,(function(A){A.isLoadingUser=!0})),Object(E.a)(T,d.a.loadUser.fulfilled,(function(A,t){A.user=t.payload,A.isLoggedIn=!0,A.isLoadingUser=!1})),Object(E.a)(T,d.a.loadUser.rejected,(function(A){A.isLoadingUser=!1})),T)}).reducer,Z=e(16),K=e(47),P={key:"auth",storage:e.n(K).a,whitelist:["token"]},q=Object(S.a)({reducer:{auth:Object(Z.g)(P,_),contacts:z},devTools:!1,middleware:Object(w.a)(Object(S.f)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}}))}),H=Object(Z.h)(q);a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(u.a,{store:q,children:Object(b.jsx)(s.a,{loading:null,persistor:H,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(F,{})})})})}),document.getElementById("root"))},9:function(A,t,e){"use strict";e.d(t,"i",(function(){return c})),e.d(t,"j",(function(){return r})),e.d(t,"h",(function(){return a})),e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return s})),e.d(t,"a",(function(){return u})),e.d(t,"f",(function(){return i})),e.d(t,"g",(function(){return d})),e.d(t,"e",(function(){return l})),e.d(t,"d",(function(){return j}));var n=e(3),c=Object(n.b)("contacts/fetchContactRequest"),r=Object(n.b)("contacts/fetchContactSuccess"),a=Object(n.b)("contacts/fetchContactError"),o=Object(n.b)("contacts/addContactRequest"),s=Object(n.b)("contacts/addContactSuccess"),u=Object(n.b)("contacts/addContactError"),i=Object(n.b)("contacts/deleteContactRequest"),d=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),j=Object(n.b)("contacts/changeFilter")}},[[81,1,2]]]);
//# sourceMappingURL=main.213e2522.chunk.js.map